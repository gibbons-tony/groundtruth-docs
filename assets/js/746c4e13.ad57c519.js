"use strict";(globalThis.webpackChunkgroundtruth_docs=globalThis.webpackChunkgroundtruth_docs||[]).push([[814],{3160:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"research-agent/introduction","title":"Research Agent","description":"Data infrastructure for commodity forecasting, transforming raw market data into production-ready ML tables on Databricks.","source":"@site/docs/research-agent/introduction.md","sourceDirName":"research-agent","slug":"/research-agent/introduction","permalink":"/groundtruth-docs/docs/research-agent/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/gibbonstony/ucberkeley-capstone/tree/main/docs/research-agent/introduction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Forecast Agent","permalink":"/groundtruth-docs/docs/forecast-agent/introduction"},"next":{"title":"Trading Agent","permalink":"/groundtruth-docs/docs/trading-agent/introduction"}}');var t=r(4848),i=r(8453);const d={sidebar_position:1},l="Research Agent",c={},a=[{value:"Lambda Functions (11 Total)",id:"lambda-functions-11-total",level:2},{value:"Data Fetchers (5 Functions)",id:"data-fetchers-5-functions",level:3},{value:"1. market-data-fetcher",id:"1-market-data-fetcher",level:4},{value:"2. weather-data-fetcher",id:"2-weather-data-fetcher",level:4},{value:"3. vix-data-fetcher",id:"3-vix-data-fetcher",level:4},{value:"4. fx-calculator-fetcher",id:"4-fx-calculator-fetcher",level:4},{value:"5. cftc-data-fetcher",id:"5-cftc-data-fetcher",level:4},{value:"GDELT Pipeline (6 Functions)",id:"gdelt-pipeline-6-functions",level:3},{value:"6. gdelt-daily-discovery",id:"6-gdelt-daily-discovery",level:4},{value:"7. gdelt-bronze-transform",id:"7-gdelt-bronze-transform",level:4},{value:"8. gdelt-csv-bronze-direct",id:"8-gdelt-csv-bronze-direct",level:4},{value:"9. gdelt-silver-backfill",id:"9-gdelt-silver-backfill",level:4},{value:"10. gdelt-silver-discovery",id:"10-gdelt-silver-discovery",level:4},{value:"11. gdelt-silver-transform",id:"11-gdelt-silver-transform",level:4},{value:"Gold Layer Architecture",id:"gold-layer-architecture",level:2},{value:"<code>commodity.gold.unified_data</code> (Production)",id:"commoditygoldunified_data-production",level:3},{value:"<code>commodity.gold.unified_data_raw</code> (Experimental)",id:"commoditygoldunified_data_raw-experimental",level:3},{value:"Data Features",id:"data-features",level:2},{value:"Validation",id:"validation",level:2},{value:"Code Repository",id:"code-repository",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"research-agent",children:"Research Agent"})}),"\n",(0,t.jsx)(n.p,{children:"Data infrastructure for commodity forecasting, transforming raw market data into production-ready ML tables on Databricks."}),"\n",(0,t.jsx)(n.h2,{id:"lambda-functions-11-total",children:"Lambda Functions (11 Total)"}),"\n",(0,t.jsx)(n.h3,{id:"data-fetchers-5-functions",children:"Data Fetchers (5 Functions)"}),"\n",(0,t.jsx)(n.h4,{id:"1-market-data-fetcher",children:"1. market-data-fetcher"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/market-data-fetcher/app.py"})," (137 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Fetches Coffee (KC=F) and Sugar (SB=F) futures prices via yfinance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Data"}),": OHLCV (Open, High, Low, Close, Volume)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Modes"}),": HISTORICAL (2015-01-01 onward) | INCREMENTAL (yesterday only, weekdays)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": CSV \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/landing/market_data/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"2-weather-data-fetcher",children:"2. weather-data-fetcher"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/weather-data-fetcher/app.py"})," (623 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Fetches weather data for 61 growing regions via Open-Meteo API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Regions"}),": 25 Coffee + 20 Sugar Cane + 16 Sugar Beet"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Variables"}),": 15 daily aggregates (temp, precipitation, humidity, wind, solar, ET)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": CSV \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/landing/weather_v2/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"3-vix-data-fetcher",children:"3. vix-data-fetcher"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/vix-data-fetcher/app.py"})," (144 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Fetches VIX volatility index from FRED API (series: VIXCLS)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Modes"}),": HISTORICAL (1990-01-01 onward) | INCREMENTAL (last 7 days)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": CSV \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/landing/vix_data/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"4-fx-calculator-fetcher",children:"4. fx-calculator-fetcher"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/fx-calculator-fetcher/app.py"})," (239 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Fetches 40 FX currency pairs from FRED + World Bank APIs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"FRED currencies"}),": 15 (BRL, INR, CNY, THB, MXN, AUD, EUR, ZAR, JPY, CHF, KRW, GBP, + 3 macro)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"World Bank currencies"}),": 25 (VND, COP, IDR, ETB, HNL, UGX, PEN, XAF, GTQ, GNF, NIC, CRC, TZS, KES, LAK, PKR, PHP, EGY, CUP, ARS, RUB, TRY, UAH, IRR, BYN)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": CSV \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/landing/macro_data/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"5-cftc-data-fetcher",children:"5. cftc-data-fetcher"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/cftc-data-fetcher/app.py"})," (263 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Fetches CFTC Commitments of Traders data for Coffee and Sugar"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": CFTC yearly ZIP files (2000-present)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Incremental loading"}),": Checks S3 for last processed date, fetches only newer records"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": CSV \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/landing/cftc_data/"})]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"gdelt-pipeline-6-functions",children:"GDELT Pipeline (6 Functions)"}),"\n",(0,t.jsx)(n.h4,{id:"6-gdelt-daily-discovery",children:"6. gdelt-daily-discovery"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/gdelt-daily-discovery/lambda_function.py"})," (237 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Discovers new GDELT GKG files not yet processed to bronze"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Process"}),": Streams GDELT master list, compares to DynamoDB tracking table"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Date range"}),": 2021-01-01 to 2030-12-31"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": Queues CSV URLs to SQS (",(0,t.jsx)(n.code,{children:"groundtruth-gdelt-backfill-queue"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"7-gdelt-bronze-transform",children:"7. gdelt-bronze-transform"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/gdelt-bronze-transform/lambda_function.py"})," (428 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Converts JSONL \u2192 Bronze Parquet (backfill mode)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DynamoDB tracking"}),": Checks ",(0,t.jsx)(n.code,{children:"jsonl_status='success'"}),", marks ",(0,t.jsx)(n.code,{children:"bronze_status"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": Parquet \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/processed/gdelt/bronze/gdelt/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"8-gdelt-csv-bronze-direct",children:"8. gdelt-csv-bronze-direct"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/gdelt-csv-bronze-direct/lambda_function.py"})," (544 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Converts CSV \u2192 Bronze Parquet directly (incremental mode, skips JSONL)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Filtering"}),": 43 tracked themes (CORE + DRIVER), commodity keywords"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GKG columns"}),": All 27 fields preserved"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Event-driven"}),": Queues dates to silver SQS after bronze success"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": Parquet \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/processed/gdelt/bronze/gdelt/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"9-gdelt-silver-backfill",children:"9. gdelt-silver-backfill"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/gdelt-silver-backfill/lambda_function.py"})," (758 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Converts Bronze \u2192 Silver (wide format pivoted by themes)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Processing"}),": One date at a time from SQS queue"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Theme taxonomy"}),": 43 themes in 6 groups (SUPPLY, LOGISTICS, TRADE, MARKET, POLICY, CORE)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Chunked processing"}),": For dates >30 files, processes in batches to avoid OOM"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": Parquet \u2192 ",(0,t.jsx)(n.code,{children:"s3://groundtruth-capstone/processed/gdelt/silver/gdelt_wide/"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"10-gdelt-silver-discovery",children:"10. gdelt-silver-discovery"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/gdelt-silver-discovery/lambda_function.py"})," (329 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Discovers dates needing silver processing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Logic"}),": Scans DynamoDB for bronze success without corresponding silver success"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Re-processing"}),": Identifies partial/old silver entries, deletes for re-processing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Output"}),": Queues dates to silver SQS queue"]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"11-gdelt-silver-transform",children:"11. gdelt-silver-transform"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/infrastructure/lambda/functions/gdelt-silver-transform/lambda_function.py"})," (286 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"What it does"}),": Legacy Bronze \u2192 Silver transformation (batch mode)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Note"}),": Similar to gdelt-silver-backfill but batch-oriented, no chunked processing"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"gold-layer-architecture",children:"Gold Layer Architecture"}),"\n",(0,t.jsxs)(n.h3,{id:"commoditygoldunified_data-production",children:[(0,t.jsx)(n.code,{children:"commodity.gold.unified_data"})," (Production)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/sql/create_gold_unified_data.sql"})," (118 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Forward-filled features for immediate use"}),"\n",(0,t.jsxs)(n.li,{children:["SQL implementation uses ",(0,t.jsx)(n.code,{children:"LAST_VALUE"})," with ",(0,t.jsx)(n.code,{children:"ORDER BY date ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW"})," pattern"]}),"\n",(0,t.jsx)(n.li,{children:"24 FX currency pairs (verified lines 71-94)"}),"\n",(0,t.jsxs)(n.li,{children:["DRY Design: Built FROM ",(0,t.jsx)(n.code,{children:"commodity.gold.unified_data_raw"})," (single source of truth)"]}),"\n"]}),"\n",(0,t.jsxs)(n.h3,{id:"commoditygoldunified_data_raw-experimental",children:[(0,t.jsx)(n.code,{children:"commodity.gold.unified_data_raw"})," (Experimental)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": ",(0,t.jsx)(n.code,{children:"research_agent/sql/create_gold_unified_data_raw.sql"})," (326 lines)"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Preserves NULLs for custom imputation strategies"}),"\n",(0,t.jsx)(n.li,{children:"Includes missingness indicator flags"}),"\n",(0,t.jsx)(n.li,{children:"Foundation table for production table"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"data-features",children:"Data Features"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Market Data"}),": OHLCV (open, high, low, close, volume)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Volatility"}),": VIX"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Currency"}),": 24 FX pairs (vnd_usd, cop_usd, idr_usd, etb_usd, hnl_usd, ugx_usd, pen_usd, xaf_usd, gtq_usd, gnf_usd, nio_usd, crc_usd, tzs_usd, kes_usd, lak_usd, pkr_usd, php_usd, egp_usd, ars_usd, rub_usd, try_usd, uah_usd, irr_usd, byn_usd)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Regional"}),": weather_data (array), gdelt_themes (array)"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Source"}),": Verified in ",(0,t.jsx)(n.code,{children:"create_gold_unified_data.sql"})," lines 71-94 (FX), 99 (weather), 108 (GDELT)"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"validation",children:"Validation"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Python validation script"}),": ",(0,t.jsx)(n.code,{children:"tests/data_quality/gold/validate_gold_unified_data.py"})]}),"\n",(0,t.jsx)(n.p,{children:"Tests schema, completeness, array structures, and data quality."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"code-repository",children:"Code Repository"}),"\n",(0,t.jsxs)(n.p,{children:["\ud83d\udcc2 ",(0,t.jsx)(n.a,{href:"https://github.com/gibbonstony/ucberkeley-capstone/tree/main/research_agent",children:"View Code on GitHub"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>l});var s=r(6540);const t={},i=s.createContext(t);function d(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);