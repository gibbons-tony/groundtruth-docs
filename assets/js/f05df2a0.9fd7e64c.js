"use strict";(globalThis.webpackChunkgroundtruth_docs=globalThis.webpackChunkgroundtruth_docs||[]).push([[433],{2099:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"trading-agent/introduction","title":"Trading Agent","description":"Trading strategy backtesting framework for commodity markets.","source":"@site/docs/trading-agent/introduction.md","sourceDirName":"trading-agent","slug":"/trading-agent/introduction","permalink":"/groundtruth-docs/docs/trading-agent/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/gibbonstony/ucberkeley-capstone/tree/main/docs/trading-agent/introduction.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Research Agent","permalink":"/groundtruth-docs/docs/research-agent/introduction"}}');var r=n(4848),l=n(8453);const t={sidebar_position:1},a="Trading Agent",c={},d=[{value:"Strategy Implementations",id:"strategy-implementations",level:2},{value:"Baseline (4 strategies)",id:"baseline-4-strategies",level:3},{value:"1. ImmediateSaleStrategy (line 29)",id:"1-immediatesalestrategy-line-29",level:4},{value:"2. EqualBatchStrategy (line 73)",id:"2-equalbatchstrategy-line-73",level:4},{value:"3. PriceThresholdStrategy (line 110)",id:"3-pricethresholdstrategy-line-110",level:4},{value:"4. MovingAverageStrategy (line 220)",id:"4-movingaveragestrategy-line-220",level:4},{value:"Prediction-Based (5 strategies)",id:"prediction-based-5-strategies",level:3},{value:"5. PriceThresholdPredictive (line 46)",id:"5-pricethresholdpredictive-line-46",level:4},{value:"6. MovingAveragePredictive (line 387)",id:"6-movingaveragepredictive-line-387",level:4},{value:"7. ExpectedValueStrategy (line 736)",id:"7-expectedvaluestrategy-line-736",level:4},{value:"8. ConsensusStrategy (line 873)",id:"8-consensusstrategy-line-873",level:4},{value:"9. RiskAdjustedStrategy (line 1035)",id:"9-riskadjustedstrategy-line-1035",level:4},{value:"Model Predictive Control (1 strategy)",id:"model-predictive-control-1-strategy",level:3},{value:"10. RollingHorizonMPC (line 39)",id:"10-rollinghorizonmpc-line-39",level:4},{value:"Production System",id:"production-system",level:2},{value:"1. data_loader.py (353 lines)",id:"1-data_loaderpy-353-lines",level:3},{value:"2. strategy_runner.py (391 lines)",id:"2-strategy_runnerpy-391-lines",level:3},{value:"3. multi_commodity_runner.py (526 lines)",id:"3-multi_commodity_runnerpy-526-lines",level:3},{value:"4. result_saver.py (346 lines)",id:"4-result_saverpy-346-lines",level:3},{value:"5. visualization.py (510 lines)",id:"5-visualizationpy-510-lines",level:3},{value:"6. <strong>init</strong>.py (46 lines)",id:"6-initpy-46-lines",level:3},{value:"Strategy Support Files",id:"strategy-support-files",level:2},{value:"indicators.py (4,624 bytes)",id:"indicatorspy-4624-bytes",level:3},{value:"brute_force_optimizer.py (10,094 bytes)",id:"brute_force_optimizerpy-10094-bytes",level:3},{value:"lp_optimizer.py (7,069 bytes)",id:"lp_optimizerpy-7069-bytes",level:3},{value:"theoretical_max_calculator.py (10,684 bytes)",id:"theoretical_max_calculatorpy-10684-bytes",level:3},{value:"Summary",id:"summary",level:2},{value:"Code Repository",id:"code-repository",level:2}];function o(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"trading-agent",children:"Trading Agent"})}),"\n",(0,r.jsx)(i.p,{children:"Trading strategy backtesting framework for commodity markets."}),"\n",(0,r.jsx)(i.h2,{id:"strategy-implementations",children:"Strategy Implementations"}),"\n",(0,r.jsxs)(i.p,{children:["10 strategy classes in ",(0,r.jsx)(i.code,{children:"production/strategies/"}),":"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"baseline-4-strategies",children:"Baseline (4 strategies)"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"File"}),": ",(0,r.jsx)(i.code,{children:"baseline.py"})," (12,719 bytes)"]}),"\n",(0,r.jsx)(i.h4,{id:"1-immediatesalestrategy-line-29",children:"1. ImmediateSaleStrategy (line 29)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Sell entire harvest immediately each week"}),"\n",(0,r.jsx)(i.li,{children:"No forecasting, no waiting for better prices"}),"\n",(0,r.jsx)(i.li,{children:"Benchmark: worst-case scenario"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"2-equalbatchstrategy-line-73",children:"2. EqualBatchStrategy (line 73)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Divide harvest into equal batches"}),"\n",(0,r.jsx)(i.li,{children:"Sell on fixed schedule (e.g., weekly, bi-weekly)"}),"\n",(0,r.jsx)(i.li,{children:"Simple time-averaging approach"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"3-pricethresholdstrategy-line-110",children:"3. PriceThresholdStrategy (line 110)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Sell when price exceeds threshold"}),"\n",(0,r.jsx)(i.li,{children:"Uses technical indicators (RSI, Bollinger Bands)"}),"\n",(0,r.jsx)(i.li,{children:"Fallback: sell remaining at deadline"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"4-movingaveragestrategy-line-220",children:"4. MovingAverageStrategy (line 220)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Buy/sell signals from MA crossover"}),"\n",(0,r.jsx)(i.li,{children:"Uses short-term and long-term moving averages"}),"\n",(0,r.jsx)(i.li,{children:"Classic technical analysis approach"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"prediction-based-5-strategies",children:"Prediction-Based (5 strategies)"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"File"}),": ",(0,r.jsx)(i.code,{children:"prediction.py"})," (50,018 bytes)"]}),"\n",(0,r.jsx)(i.h4,{id:"5-pricethresholdpredictive-line-46",children:"5. PriceThresholdPredictive (line 46)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Extends PriceThresholdStrategy with forecast-based thresholds"}),"\n",(0,r.jsx)(i.li,{children:"Uses probabilistic forecasts (2,000 Monte Carlo paths) to set dynamic thresholds"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"6-movingaveragepredictive-line-387",children:"6. MovingAveragePredictive (line 387)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Extends MovingAverageStrategy with forecasts"}),"\n",(0,r.jsx)(i.li,{children:"Combines MA signals with forecast direction"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"7-expectedvaluestrategy-line-736",children:"7. ExpectedValueStrategy (line 736)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Maximizes expected return using forecast distributions"}),"\n",(0,r.jsx)(i.li,{children:"Sells when expected value of selling > expected value of holding"}),"\n",(0,r.jsx)(i.li,{children:"Evaluates all 2,000 forecast paths for decision making"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"8-consensusstrategy-line-873",children:"8. ConsensusStrategy (line 873)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Majority vote across forecast paths"}),"\n",(0,r.jsx)(i.li,{children:"Sells when majority of 2,000 paths predict up-trend"}),"\n",(0,r.jsx)(i.li,{children:"Democratic ensemble approach"}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"9-riskadjustedstrategy-line-1035",children:"9. RiskAdjustedStrategy (line 1035)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Balances returns vs. forecast uncertainty"}),"\n",(0,r.jsx)(i.li,{children:"Uses Sharpe ratio / risk-adjusted return metrics"}),"\n",(0,r.jsx)(i.li,{children:"Accounts for volatility in forecast distribution"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h3,{id:"model-predictive-control-1-strategy",children:"Model Predictive Control (1 strategy)"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"File"}),": ",(0,r.jsx)(i.code,{children:"rolling_horizon_mpc.py"})," (11,548 bytes)"]}),"\n",(0,r.jsx)(i.h4,{id:"10-rollinghorizonmpc-line-39",children:"10. RollingHorizonMPC (line 39)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Rolling horizon optimization"}),"\n",(0,r.jsx)(i.li,{children:"Re-optimizes selling schedule at each time step"}),"\n",(0,r.jsx)(i.li,{children:"Uses linear programming for multi-period decisions"}),"\n",(0,r.jsx)(i.li,{children:"Most sophisticated optimization approach"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"production-system",children:"Production System"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Runners"}),": ",(0,r.jsx)(i.code,{children:"production/runners/*.py"})," - ",(0,r.jsx)(i.strong,{children:"2,172 total lines"})]}),"\n",(0,r.jsx)(i.h3,{id:"1-data_loaderpy-353-lines",children:"1. data_loader.py (353 lines)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Loads historical price data and forecasts from Databricks"}),"\n",(0,r.jsx)(i.li,{children:"Loads forecast distributions (2,000 Monte Carlo paths)"}),"\n",(0,r.jsx)(i.li,{children:"Handles multi-commodity data (Coffee + Sugar)"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Key methods"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"load_price_data()"}),": Historical prices from gold tables"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"load_forecast_data()"}),": Forecast distributions"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"load_multi_commodity_data()"}),": Multiple commodities"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"2-strategy_runnerpy-391-lines",children:"2. strategy_runner.py (391 lines)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Runs individual strategy backtests"}),"\n",(0,r.jsx)(i.li,{children:"Executes strategy logic across historical periods"}),"\n",(0,r.jsx)(i.li,{children:"Collects execution metrics (return, timing, quantity sold)"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Key methods"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"run_backtest()"}),": Execute strategy on historical data"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"calculate_metrics()"}),": Compute performance metrics"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"save_execution_log()"}),": Log trading decisions"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"3-multi_commodity_runnerpy-526-lines",children:"3. multi_commodity_runner.py (526 lines)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Orchestrates backtesting across multiple commodities"}),"\n",(0,r.jsx)(i.li,{children:"Parallel strategy execution"}),"\n",(0,r.jsx)(i.li,{children:"Aggregates results across commodities"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Key methods"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"run_all_strategies()"}),": Execute all strategies"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"run_multi_commodity()"}),": Coffee + Sugar backtests"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"aggregate_results()"}),": Combine metrics"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"4-result_saverpy-346-lines",children:"4. result_saver.py (346 lines)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Saves backtest results to Databricks Delta Lake"}),"\n",(0,r.jsx)(i.li,{children:"Schema: strategy_name, commodity, metrics, execution_log"}),"\n",(0,r.jsx)(i.li,{children:"Supports incremental updates"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Key methods"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"save_to_databricks()"}),": Write results to Delta Lake"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"save_execution_details()"}),": Save trade-level details"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"save_comparison_matrix()"}),": Strategy comparison table"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"5-visualizationpy-510-lines",children:"5. visualization.py (510 lines)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Creates charts for backtest analysis"}),"\n",(0,r.jsx)(i.li,{children:"Price evolution vs. strategy decisions"}),"\n",(0,r.jsx)(i.li,{children:"Performance comparison charts"}),"\n",(0,r.jsx)(i.li,{children:"Return distribution visualizations"}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Key methods"}),":"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"plot_strategy_execution()"}),": Trade timing on price chart"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"plot_performance_comparison()"}),": Bar charts of returns"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"plot_forecast_distributions()"}),": Monte Carlo path visualization"]}),"\n"]}),"\n",(0,r.jsxs)(i.h3,{id:"6-initpy-46-lines",children:["6. ",(0,r.jsx)(i.strong,{children:"init"}),".py (46 lines)"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Package initialization"}),"\n",(0,r.jsx)(i.li,{children:"Exports key classes and functions"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"strategy-support-files",children:"Strategy Support Files"}),"\n",(0,r.jsx)(i.h3,{id:"indicatorspy-4624-bytes",children:"indicators.py (4,624 bytes)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Technical indicator calculations"}),"\n",(0,r.jsx)(i.li,{children:"RSI (Relative Strength Index)"}),"\n",(0,r.jsx)(i.li,{children:"Bollinger Bands"}),"\n",(0,r.jsx)(i.li,{children:"Moving Averages"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"brute_force_optimizerpy-10094-bytes",children:"brute_force_optimizer.py (10,094 bytes)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Brute force parameter search"}),"\n",(0,r.jsx)(i.li,{children:"Grid search for strategy hyperparameters"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"lp_optimizerpy-7069-bytes",children:"lp_optimizer.py (7,069 bytes)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Linear programming optimization"}),"\n",(0,r.jsx)(i.li,{children:"Sell schedule optimization using LP solver"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"theoretical_max_calculatorpy-10684-bytes",children:"theoretical_max_calculator.py (10,684 bytes)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Perfect foresight benchmark calculator"}),"\n",(0,r.jsx)(i.li,{children:"Theoretical maximum return (upper bound)"}),"\n"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Strategies"}),": 10 total"]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Baseline (4)"}),": ImmediateSale, EqualBatch, PriceThreshold, MovingAverage"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Predictive (5)"}),": PriceThresholdPredictive, MovingAveragePredictive, ExpectedValue, Consensus, RiskAdjusted"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Optimization (1)"}),": RollingHorizonMPC"]}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Forecast integration"}),": Uses 2,000 Monte Carlo paths per forecast for probabilistic decision making"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Multi-currency support"}),": Handles 15+ currencies including COP (Colombian Peso)"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Backtesting framework"}),": 2,172 lines of runner code across 6 files"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Execution metrics"}),": Return, timing, quantity sold, trade-level details"]}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.strong,{children:"Persistence"}),": Results saved to Databricks Delta Lake"]}),"\n",(0,r.jsx)(i.hr,{}),"\n",(0,r.jsx)(i.h2,{id:"code-repository",children:"Code Repository"}),"\n",(0,r.jsxs)(i.p,{children:["\ud83d\udcc2 ",(0,r.jsx)(i.a,{href:"https://github.com/gibbonstony/ucberkeley-capstone/tree/main/trading_agent",children:"View Code on GitHub"})]})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},8453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>a});var s=n(6540);const r={},l=s.createContext(r);function t(e){const i=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:i},e.children)}}}]);